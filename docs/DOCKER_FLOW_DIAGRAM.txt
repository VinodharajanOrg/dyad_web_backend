```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    DOCKER AUTO-START INTEGRATION FLOW                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USER     â”‚  "Create an Express server with /hello endpoint"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND (http://localhost:5173)                                       â”‚
â”‚                                                                         â”‚
â”‚  ChatInterface.tsx                                                     â”‚
â”‚  â”œâ”€ User types message                                                â”‚
â”‚  â”œâ”€ POST /api/stream/chat                                            â”‚
â”‚  â””â”€ EventSource listening for SSE events                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND (http://localhost:3000)                                        â”‚
â”‚                                                                         â”‚
â”‚ routes/stream.ts                                                       â”‚
â”‚ â”œâ”€ STEP 1-10: Load chat, build prompt, call AI                       â”‚
â”‚ â”œâ”€ STEP 11-14: Stream AI response chunks                             â”‚
â”‚ â”‚    sendEvent('chat:chunk', { chunk, fullText })                    â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ STEP 15-17: Parse AI response for <dyad-write> tags              â”‚
â”‚ â”‚    fileChanges = [                                                 â”‚
â”‚ â”‚      { path: 'server.js', type: 'write', content: '...' },       â”‚
â”‚ â”‚      { path: 'package.json', type: 'write', content: '...' }     â”‚
â”‚ â”‚    ]                                                               â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ STEP 18: Write files to disk                                      â”‚
â”‚ â”‚    fs.writeFile('./apps/my-app/server.js', content)              â”‚
â”‚ â”‚    fs.writeFile('./apps/my-app/package.json', content)           â”‚
â”‚ â”‚    âœ… Files written to: ./apps/my-app/                            â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â””â”€ STEP 18b: ğŸ†• AUTO-START DOCKER CONTAINER                          â”‚
â”‚      â”‚                                                                 â”‚
â”‚      â”œâ”€ if (DOCKER_ENABLED && fileChanges.length > 0)                â”‚
â”‚      â”‚                                                                 â”‚
â”‚      â”œâ”€ sendEvent('docker:starting')                                 â”‚
â”‚      â”‚   â†“ Frontend shows: "ğŸ³ Starting Docker container..."         â”‚
â”‚      â”‚                                                                 â”‚
â”‚      â”œâ”€ dockerService.stopApp(appId)  // Stop old container          â”‚
â”‚      â”‚                                                                 â”‚
â”‚      â”œâ”€ dockerService.runAppInDocker({                               â”‚
â”‚      â”‚     appId: 1,                                                  â”‚
â”‚      â”‚     appPath: './apps/my-app',                                 â”‚
â”‚      â”‚     installCommand: 'pnpm install',                           â”‚
â”‚      â”‚     startCommand: 'pnpm dev'                                  â”‚
â”‚      â”‚   })                                                           â”‚
â”‚      â”‚                                                                 â”‚
â”‚      â””â”€ sendEvent('docker:started', {                                â”‚
â”‚            port: 32100,                                               â”‚
â”‚            url: 'http://localhost:32100'                             â”‚
â”‚          })                                                           â”‚
â”‚          â†“ Frontend shows: "âœ… App running [Open App â†’]"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOCKER SERVICE (services/docker_service.ts)                           â”‚
â”‚                                                                         â”‚
â”‚ runAppInDocker()                                                       â”‚
â”‚ â”œâ”€ 1. Check: docker --version                                        â”‚
â”‚ â”‚    âœ… Docker available                                              â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ 2. Stop: docker stop dyad-app-1 && docker rm dyad-app-1          â”‚
â”‚ â”‚    âœ… Old container removed                                         â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ 3. Create Dockerfile.dyad:                                        â”‚
â”‚ â”‚    FROM node:22-alpine                                             â”‚
â”‚ â”‚    RUN npm install -g pnpm                                         â”‚
â”‚ â”‚    âœ… Dockerfile created                                            â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ 4. Build: docker build -t dyad-app-1 .                          â”‚
â”‚ â”‚    [+] Building image...                                           â”‚
â”‚ â”‚    âœ… Image built: dyad-app-1                                       â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â””â”€ 5. Run: docker run --rm --name dyad-app-1 \                      â”‚
â”‚           -p 32100:32100 \                                            â”‚
â”‚           -v ./apps/my-app:/app \                                     â”‚
â”‚           -v dyad-pnpm-1:/app/.pnpm-store \                          â”‚
â”‚           -w /app \                                                   â”‚
â”‚           dyad-app-1 \                                               â”‚
â”‚           sh -c "pnpm install && pnpm dev"                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOCKER CONTAINER (dyad-app-1)                                         â”‚
â”‚                                                                         â”‚
â”‚ Container Details:                                                     â”‚
â”‚ â”œâ”€ Name: dyad-app-1                                                  â”‚
â”‚ â”œâ”€ Image: dyad-app-1                                                 â”‚
â”‚ â”œâ”€ Base: node:22-alpine                                              â”‚
â”‚ â”œâ”€ Port: 32100 â†’ 32100                                               â”‚
â”‚ â”œâ”€ Working Dir: /app                                                 â”‚
â”‚ â”œâ”€ Volumes:                                                           â”‚
â”‚ â”‚   - ./apps/my-app â†’ /app (app code)                               â”‚
â”‚ â”‚   - dyad-pnpm-1 â†’ /app/.pnpm-store (deps cache)                  â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ Execution:                                                         â”‚
â”‚ â”‚   $ pnpm install                                                   â”‚
â”‚ â”‚   Progress: resolved 50, reused 50, downloaded 0                   â”‚
â”‚ â”‚   Done in 2.1s                                                     â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”‚   $ pnpm dev                                                       â”‚
â”‚ â”‚   > node server.js                                                 â”‚
â”‚ â”‚   Server running on port 32100                                     â”‚
â”‚ â”‚   âœ… READY                                                          â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â””â”€ Output streamed to:                                                â”‚
â”‚     - Backend console (always)                                        â”‚
â”‚     - Frontend via SSE (docker:output events)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND UPDATE                                                        â”‚
â”‚                                                                         â”‚
â”‚  EventSource receives events:                                          â”‚
â”‚  â”œâ”€ event: docker:starting                                           â”‚
â”‚  â”‚   â†’ setDockerStatus("ğŸ³ Starting Docker container...")            â”‚
â”‚  â”‚                                                                      â”‚
â”‚  â”œâ”€ event: docker:started                                            â”‚
â”‚  â”‚   â†’ setDockerStatus("âœ… App running in Docker")                   â”‚
â”‚  â”‚   â†’ setDockerUrl("http://localhost:32100")                       â”‚
â”‚  â”‚                                                                      â”‚
â”‚  â””â”€ UI Updates:                                                       â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚      â”‚ âœ… App running in Docker    [Open App â†’]       â”‚            â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚           â†‘                              â†‘                            â”‚
â”‚           â”‚                              â”‚                            â”‚
â”‚      Status text                  Clickable button                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER CLICKS "OPEN APP â†’"                                              â”‚
â”‚                                                                         â”‚
â”‚  Opens new tab: http://localhost:32100                                â”‚
â”‚  â”œâ”€ Browser â†’ Docker Container (port 32100)                          â”‚
â”‚  â”œâ”€ Express server responds                                           â”‚
â”‚  â””â”€ { "message": "Hello World!" }                                    â”‚
â”‚     âœ… APP ACCESSIBLE!                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              KEY FEATURES                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… AUTOMATIC         Docker starts immediately after files are generated
âœ… ISOLATED          Each app in its own container
âœ… CACHED            Dependencies cached in named volumes
âœ… REAL-TIME         Status updates via SSE
âœ… ONE-CLICK         "Open App" button for instant access
âœ… PRODUCTION-LIKE   Same environment as deployment


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            FILE STRUCTURE                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

backend/
â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ DOCKER_ENABLED=true
â”‚   â”œâ”€â”€ DOCKER_APP_PORT=32100
â”‚   â””â”€â”€ DOCKER_NODE_IMAGE=node:22-alpine
â”‚
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ my-app/
â”‚       â”œâ”€â”€ Dockerfile.dyad (auto-generated)
â”‚       â”œâ”€â”€ server.js (AI-generated)
â”‚       â””â”€â”€ package.json (AI-generated)
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ routes/
    â”‚   â””â”€â”€ stream.ts (ğŸ†• Docker integration added)
    â”‚
    â””â”€â”€ services/
        â””â”€â”€ docker_service.ts (Docker operations)

frontend/
â””â”€â”€ src/
    â””â”€â”€ components/
        â”œâ”€â”€ ChatInterface.tsx (ğŸ†• Docker status added)
        â””â”€â”€ ChatInterface.css (ğŸ†• Docker styles added)


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         DOCKER COMMANDS                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# View running containers
docker ps --filter "name=dyad-app-*"

# View container logs
docker logs -f dyad-app-1

# Stop container
docker stop dyad-app-1

# Remove container
docker rm dyad-app-1

# List volumes
docker volume ls --filter "name=dyad-pnpm-*"

# Remove volume
docker volume rm dyad-pnpm-1

# Access running app
curl http://localhost:32100
# or
open http://localhost:32100


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            TIMING METRICS                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AI Response:        5-15 seconds
File Write:         <100ms
Docker Build:       30-60s (first time), 2-5s (cached)
Container Start:    5-10s (first time), 3-5s (subsequent)
Deps Install:       10-30s (first time), 2-5s (cached)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total (First):      50-120 seconds
Total (Cached):     15-35 seconds


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          TROUBLESHOOTING                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problem: Container not starting
Solution:
  1. Check Docker: docker ps
  2. Check env: DOCKER_ENABLED=true
  3. View logs: docker logs dyad-app-1

Problem: Port already in use
Solution:
  1. Find process: lsof -i :32100
  2. Kill process: kill -9 <PID>
  3. Or change port in .env

Problem: Files not generated
Solution:
  1. Check AI response includes <dyad-write> tags
  2. Check backend console for errors
  3. Verify app path: ls -la backend/apps/

Problem: Frontend not showing status
Solution:
  1. Open browser console (F12)
  2. Check for SSE events
  3. Verify backend is sending docker:* events
```
